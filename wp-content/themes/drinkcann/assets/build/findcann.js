document.addEventListener("DOMContentLoaded",(function(){console.log("find-a-cann script loaded");const e=document.getElementById("getdelivery"),t=document.getElementById("getpickup"),l=document.getElementById("map");document.getElementById("resultsarea"),document.getElementById("resultscount"),document.getElementById("clear").addEventListener("click",(function(){document.getElementById("dataresults").innerHTML="",document.getElementById("resultsarea").classList.add("hidden"),document.getElementById("resultscount").innerHTML=0,document.getElementById("pac-input").value=""})),t.addEventListener("click",(()=>(document.getElementById("type").value=2,l.classList.remove("inactivemap"),t.classList.add("opacity-100"),e.classList.remove("opacity-100"),e.classList.add("opacity-50"),document.getElementById("pac-input").value="",document.getElementById("dataresults").innerHTML="",document.getElementById("resultsarea").classList.add("hidden"),document.getElementById("resultscount").innerHTML=0,!1))),e.addEventListener("click",(()=>(document.getElementById("type").value=1,document.getElementById("pac-input").value="",document.getElementById("dataresults").innerHTML="",document.getElementById("resultsarea").classList.add("hidden"),document.getElementById("resultscount").innerHTML=0,l.classList.add("inactivemap"),t.classList.add("opacity-50"),t.classList.remove("opacity-100"),e.classList.add("opacity-100"),!1))),function(){console.log(coord);const e=new google.maps.Map(document.getElementById("map"),{center:{lat:40.749933,lng:-73.98633},zoom:4,mapTypeControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]}),t=document.getElementById("pac-input"),l=new google.maps.places.Autocomplete(t,{fields:["formatted_address","geometry","name"],strictBounds:!1,types:["address"]});l.bindTo("bounds",e);const o=new google.maps.InfoWindow,n=document.getElementById("infowindow-content");o.setContent(n);const s=new google.maps.Marker({map:e,anchorPoint:new google.maps.Point(0,-29)});l.addListener("place_changed",(()=>{o.close(),s.setVisible(!1);const t=l.getPlace();if(t.geometry&&t.geometry.location){if(t.geometry.viewport){e.fitBounds(t.geometry.viewport,240);var a=t.geometry.location.lat(),r=t.geometry.location.lng(),d=new XMLHttpRequest;d.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("dataresults").innerHTML=this.responseText)};var c=document.getElementById("type").value;d.open("POST","/wp-admin/admin-ajax.php",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send("action=get_location_cards&lat="+a+"&lng="+r+"&type="+c);var y=new XMLHttpRequest,p=(new google.maps.Point(12,15),new google.maps.Point(12,9)),m={path:"M 12,2 C 8.1340068,2 5,5.1340068 5,9 c 0,5.25 7,13 7,13 0,0 7,-7.75 7,-13 0,-3.8659932 -3.134007,-7 -7,-7 z",anchor:new google.maps.Point(12,17),fillOpacity:1,fillColor:"#5E609D",strokeWeight:2,strokeColor:"#5E609D",scale:2,labelOrigin:p};y.onreadystatechange=function(){if(4==this.readyState&&200==this.status){this.responseText;const n=JSON.parse(this.responseText);document.getElementById("resultsarea").classList.remove("hidden"),document.getElementById("resultscount").innerHTML=n.length;var t=0;for(i=0;i<n.length;i++){t=i+1;var l=new google.maps.LatLng(n[i].lat,n[i].lng),o=' <div class=" content pt-4 text-center font-inherit"><small class="mt-2 text-xs inline border p-3 border-purple center w-auto border-1 rounded-xl">'+n[i].distance+" MILES</small>";o=(o=o+'<h2 class="text-center mt-4  h5 text-purple">'+n[i].title+"</h2>")+'<p class="mt-2 mb-2 text-purple text-sm">'+n[i].location_address+"</div>",o+="</div>";const s=new google.maps.InfoWindow({content:o}),a=new google.maps.Marker({position:l,title:n[i].title,label:{text:""+t,color:"white"},icon:m});a.setMap(e),a.addListener("click",(()=>{s.open({anchor:a,map:e,shouldFocus:!1})})),console.log(i)}}},y.open("POST","/wp-admin/admin-ajax.php",!0),y.setRequestHeader("Content-type","application/x-www-form-urlencoded"),y.send("action=get_location_markers&lat="+a+"&lng="+r+"&type="+c)}else e.setCenter(t.geometry.location),e.setZoom(13);n.children["place-name"].textContent=t.name,n.children["place-address"].textContent=t.formatted_address,o.open(e,s)}}))}()}));